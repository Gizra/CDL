"use strict";!function(){function a(){e=h.select("body").append("svg").attr("width",j).attr("height",k).call(h.behavior.zoom().scaleExtent([1,10]).on("zoom",d)),g=e.append("rect").attr("class","background").attr("width",j).attr("height",k),f=e.append("g").attr("class","tree")}function b(){var a=i.defer(),b=window.location.href+"data/tree.json";return h.json(b,function(b,c){return b?console.warn(b):(a.resolve(c),void 0)}),a.promise}function c(a){var b,c,d=j,e=k;a.x0=d/2,a.y0=0,b=h.layout.tree().size([d,e]);var g=b.nodes(a);c=b.links(g),g.forEach(function(a){a.y=0===a.depth?50:l(a.depth)}),c.forEach(function(a){console.log(a.source.y,a.target.y,10*a.source.depth,a.target.depth)}),console.log(a),console.log(g),console.log(c);var i=f.append("svg:g").attr("class","lines"),m=i.selectAll("g.link").data(c).enter();m.append("svg:line").style("stroke","black").attr("x1",function(a){return a.source.x}).attr("y1",function(a){return a.source.y}).attr("x2",function(a){return a.target.x}).attr("y2",function(a){return a.target.y});var n=f.selectAll("g.node").data(g).enter().append("svg:g").attr("transform",function(a){return"translate("+a.x+","+a.y+")"});n.append("svg:circle").attr("r",20).style("fill",function(a){return a.fill}),n.append("svg:circle").attr("r",15).style("fill","#FFF"),n.append("svg:text").attr("font-size",2.5).attr("text-anchor","middle").text(function(a){return a.name})}function d(){f.attr("transform","translate("+h.event.translate+")scale("+h.event.scale+")")}var e,f,g,h=window.d3,i=window.Q,j=1e3,k=800,l=h.scale.linear().domain([0,6]).range([0,j]);a(),b().then(function(a){c(a)})}();